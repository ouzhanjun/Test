<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>菜鸟教程(runoob.com)</title>

    <script src="core.js"></script>
    <script src="JDQuery.js"></script>
    <script src="document.js"></script>
    <script src="window.js"></script>
    <script src="callbacks.js"></script>
    <script src="promise.js"></script>
</head>

<body>

    <h1>我的第一个 Web 页面</h1>
    <button type="button">点击这里</button>
    <p>点击按钮修改当前 URL 的锚部分为 #part5</p>
    <button onclick="changePart()">点我</button>
    <p id="demo">demo</p>
</body>
<script>
function test(resolve, reject) {
    var timeOut = Math.random() * 1;
    console.log('set timeout to: ' + timeOut + ' seconds.');
    setTimeout(function () {
        if (timeOut < 1) {
            console.log('call resolve()...');
            resolve('200 OK');
            resolve('201 OK');
        }
        else {
            console.log('call reject()...');
            reject('timeout in ' + timeOut + ' seconds.');
        }
    }, timeOut * 1000);
}
var p1 = new Promise(test);
var p2 = p1.then(function (result) {
    console.log('成功：' + result);
});
var p3 = p2.catch(function (reason) {
    console.log('失败：' + reason);
});

//--------------------------------------
    var fn = function (resolve, reject) {
        resolve("cc");
    }

    var p1 = new jsDom.Promise(fn);
    p1.then(function (data) {
        console.log(data);
        return 'hello again';
    });
    p1.catch(function (err) {
        alert(err.Message);
    });
</script>

</html>